# 药物相互作用数据库

## 功能说明

系统内置药物相互作用检测功能，通过 `data/interactions/interaction-db.json` 数据库存储和管理相互作用规则。该功能支持：

- **药物-药物相互作用检测**：检查当前用药组合之间的相互作用
- **药物-疾病冲突检测**：检查药物是否与用户疾病史冲突
- **药物剂量冲突检测**：检查剂量是否超标，考虑年龄和肾功能
- **药物-食物相互作用检测**：检查药物与饮食的相互作用

## 五级严重程度分级

| 级别 | 名称 | 色标 | 定义 | 处理建议 |
|------|------|------|------|----------|
| A | 安全 | 🟢 | 无显著相互作用 | 无需特别措施 |
| B | 谨慎使用 | 🟡 | 轻微相互作用，风险较低 | 注意观察，无需调整 |
| C | 相对禁忌 | 🟠 | 有临床意义的相互作用 | 权衡获益风险，考虑替代方案 |
| D | 禁忌 | 🔴 | 严重相互作用，风险>获益 | 避免合用，特殊情况需监测 |
| X | 绝对禁忌 | 🆘 | 危及生命的相互作用 | 严格禁止合用 |

## 专业人员贡献指南 🩺

我们诚邀医疗专业人士（药师、医生、临床药理学家等）帮助完善和维护药物相互作用数据库。

### 数据库文件位置

```
data/interactions/interaction-db.json
```

### 数据结构说明

每条相互作用规则包含以下字段：

```json
{
  "id": "int_001",
  "type": "drug_drug",           // 类型: drug_drug/drug_disease/drug_dosage/drug_food
  "type_name": "药物-药物相互作用",
  "drugs": [                      // 对于药物-药物相互作用
    {
      "name": "华法林",
      "generic_name": "Warfarin",
      "category": "抗凝药",
      "synonyms": ["可迈丁", "Coumadin"]
    },
    {
      "name": "阿司匹林",
      "generic_name": "Aspirin",
      "category": "抗血小板药",
      "synonyms": ["乙酰水杨酸"]
    }
  ],
  "severity": {
    "level": "X",                 // A/B/C/D/X
    "level_name": "绝对禁忌",
    "level_code": 5,              // 1-5
    "color": "🆘"
  },
  "interaction_details": {
    "mechanism": "作用机制说明",
    "effect": "相互作用效果",
    "clinical_impact": "临床影响"
  },
  "recommendations": [
    "建议1",
    "建议2"
  ],
  "management": {
    "action": "avoid",            // avoid/monitor/adjust
    "monitoring": ["监测项目1", "监测项目2"]
  },
  "evidence": {
    "source": "FDA药品说明书",
    "reliability": "high",
    "references": [
      "Drug Interactions: Warfarin and Aspirin",
      "Clinical Pharmacology"
    ]
  },
  "active": true,
  "is_custom": false,             // 预设规则为false，自定义规则为true
  "created_at": "2025-12-31T12:34:56.789Z"
}
```

### 不同类型的相互作用规则

#### 药物-药物相互作用 (drug_drug)

```json
{
  "id": "int_001",
  "type": "drug_drug",
  "drugs": [
    {"name": "华法林", "generic_name": "Warfarin", "category": "抗凝药"},
    {"name": "阿司匹林", "generic_name": "Aspirin", "category": "抗血小板药"}
  ],
  "severity": {"level": "X", "level_name": "绝对禁忌", "level_code": 5},
  ...
}
```

#### 药物-疾病相互作用 (drug_disease)

```json
{
  "id": "int_015",
  "type": "drug_disease",
  "drug": {
    "name": "布洛芬",
    "generic_name": "Ibuprofen",
    "category": "NSAID"
  },
  "disease": {
    "name": "消化性溃疡",
    "icd_code": "K25",
    "synonyms": ["胃溃疡", "十二指肠溃疡"]
  },
  "severity": {"level": "X", "level_name": "绝对禁忌", "level_code": 5},
  ...
}
```

#### 药物剂量限制 (drug_dosage)

```json
{
  "id": "int_023",
  "type": "drug_dosage",
  "drug": {
    "name": "地高辛",
    "generic_name": "Digoxin",
    "category": "强心苷"
  },
  "dosage_limit": {
    "max_daily_dose": {"value": 0.25, "unit": "mg"},
    "warning_threshold": {"value": 0.5, "unit": "mg"},
    "age_adjustments": [
      {
        "age_group": "老年人(>65岁)",
        "max_dose": {"value": 0.125, "unit": "mg"}
      }
    ]
  },
  ...
}
```

#### 药物-食物相互作用 (drug_food)

```json
{
  "id": "int_019",
  "type": "drug_food",
  "drug": {
    "name": "华法林",
    "generic_name": "Warfarin",
    "category": "抗凝药"
  },
  "food": {
    "name": "富含维生素K的食物",
    "category": "蔬菜",
    "examples": ["菠菜", "甘蓝", "西兰花"]
  },
  "severity": {"level": "C", "level_name": "相对禁忌", "level_code": 3},
  ...
}
```

### 更新指南

#### 添加新的相互作用规则

1. **遵循数据结构格式**：按照上述格式提供完整字段
2. **确保信息来源可靠**：
   - 优先使用药品说明书（FDA、EMA、NMPA）
   - 临床指南和共识
   - 权威医学文献（Lancet、NEJM等）
   - 药物相互作用专业数据库（Micromedex、Facts & Comparisons）
3. **提供准确的严重程度分级**：根据临床证据合理分级
4. **给出清晰的管理建议**：包括监测指标和处理方案
5. **更新metadata部分**：记录数据来源和审核日期

#### 严重程度分级参考

**X类（绝对禁忌）**：危及生命的相互作用，严格禁止合用
- 示例：MAOI + SSRIs（5-羟色胺综合征）
- 示例：硝酸甘油 + 西地那非（严重低血压）
- 示例：特非那定 + 大环内酯类（致命性心律失常）

**D类（禁忌）**：严重相互作用，风险明显大于获益
- 示例：华法林 + 阿司匹林（严重出血）
- 示例：地高辛 + 排钾利尿剂（地高辛中毒）
- 示例：辛伐他汀 + 强效CYP3A4抑制剂（横纹肌溶解）

**C类（相对禁忌）**：有临床意义的相互作用
- 示例：NSAIDs + ACEI/ARB（降低降压效果，增加肾损伤风险）
- 示例：华法林 + 富含维生素K食物（降低抗凝效果）
- 示例：他汀类 + 葡萄柚汁（血药浓度升高）

**B类（谨慎使用）**：轻微相互作用，风险较低
- 示例：某些抗生素 + 口服避孕药（可能降低避孕效果）
- 示例：H2阻滞剂 + 抗酸药（可能影响吸收）

**A类（安全）**：无显著相互作用
- 示例：维生素C + 复合维生素B
- 示例：氨氯地平 + 厄贝沙坦（降压药组合）

### 质量要求

为确保数据质量和患者安全，贡献时请遵循：

1. **准确性**：基于权威医学资源（FDA、EMA、NMPA药品说明书，临床指南）
2. **完整性**：提供完整的机制、影响和建议，不能遗漏关键信息
3. **清晰性**：使用专业的医学术语，避免模糊表述
4. **可追溯性**：在 `evidence` 字段注明数据来源，便于审核和更新
5. **实用性**：建议要具体可操作，监测指标要明确
6. **定期更新**：医学知识不断更新，建议定期审查和更新

### 版本控制

更新数据库时请遵循版本控制规范：

1. **更新版本号**：在 `version` 字段增加版本号（如从1.0.0到1.0.1）
2. **更新时间戳**：更新 `last_updated` 为当前时间
3. **记录更新内容**：在 `metadata` 部分添加 `changelog` 字段
4. **更新统计信息**：更新 `statistics` 中的规则数量
5. **保留备份**：保留旧版本备份以防需要回滚

示例更新记录：
```json
{
  "version": "1.1.0",
  "last_updated": "2025-01-15T10:30:00.000Z",
  "metadata": {
    "changelog": [
      {
        "version": "1.1.0",
        "date": "2025-01-15",
        "changes": "新增5条药物-药物相互作用规则",
        "contributor": "张医生（药师）",
        "reviewer": "李主任（临床药学）"
      }
    ],
    "last_review": "2025-01-15",
    "next_review": "2025-07-15"
  }
}
```

### 数据验证

在提交更新前，请进行以下验证：

1. **JSON格式验证**：确保JSON格式正确，无语法错误
2. **字段完整性检查**：确保必填字段都已填写
3. **数据一致性检查**：
   - `severity.level` 与 `severity.level_code` 一致
   - `statistics` 中的数量与实际规则数量一致
4. **重复检查**：确保不添加重复的规则
5. **逻辑检查**：确保建议与严重程度分级匹配

### 免责声明

药物相互作用数据库仅供参考，不能替代专业医疗判断。使用本系统的用户应：

- **咨询专业意见**：咨询医生或药师的专业意见
- **个体化调整**：根据个体情况调整用药方案
- **定期更新**：定期检查和更新相互作用数据库
- **及时求助**：如有疑问，及时寻求专业医疗建议
- **自行负责**：使用者对基于数据库做出的决策负责

### 贡献流程

1. **阅读本文档**：了解数据结构和质量要求
2. **收集证据**：从权威来源收集相互作用信息
3. **准备数据**：按照格式准备规则数据
4. **验证数据**：进行格式和逻辑验证
5. **提交更新**：通过以下方式提交：
   - GitHub Pull Request
   - 邮件提交
6. **审核流程**：由专业药师/医生审核
7. **合并更新**：审核通过后合并到主数据库
8. **版本记录**：在changelog中记录贡献者

### 联系方式

如需贡献或报告数据库问题，请通过以下方式联系：

- **GitHub Issues**: [项目地址]
- **邮箱**: [项目维护邮箱]
- **微信群**: [医疗专业人士贡献群]

感谢您的专业贡献，让系统更安全、更可靠！💪

## 附录：常见问题

### Q1: 如何确定严重程度分级？

A: 基于以下因素综合判断：
- 相互作用的临床意义
- 不良反应的严重程度
- 是否危及生命
- 是否有替代方案
- 权衡风险与获益

### Q2: 数据更新频率是多少？

A: 建议：
- 新药上市后3个月内添加相关相互作用
- 每季度审查一次现有规则
- 重要安全警告48小时内更新

### Q3: 如何处理争议性的相互作用？

A:
- 标注证据等级（高/中/低）
- 提供不同观点的来源
- 给出保守的建议
- 建议咨询专科医生

### Q4: 可以添加中草药相互作用吗？

A: 可以，但需要：
- 提供高质量的临床证据
- 明确中草药的组成成分
- 标注证据的可靠性等级
- 建议谨慎使用

### Q5: 如何处理儿童用药的相互作用？

A:
- 添加年龄限制字段
- 提供儿童剂量调整建议
- 标注是否适用于儿童
- 参考儿科用药指南
