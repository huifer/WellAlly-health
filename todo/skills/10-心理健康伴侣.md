# 心理健康伴侣技能设计

## 概述
**技能名称**: `mental-health-companion`
**目的**: 提供心理健康监测、情绪追踪和心理健康支持建议。

## 描述
分析用户的情绪模式、压力水平、心理健康趋势，提供情绪支持建议、压力管理技巧和心理健康资源推荐。**注意：这不是心理治疗，而是心理健康自我管理支持工具。**在需要情绪支持、压力管理或询问"如何改善我的心理健康？"时使用。

## 数据集成

### 数据源
- **情绪记录** (`data/mood/`): 每日情绪追踪
- **症状记录** (`data/symptoms/`): 心理/情绪相关症状
- **睡眠记录**: 睡眠与情绪关联
- **药物记录** (`data/medications/`): 影响情绪的药物
- **生活事件**: 压力事件、重大变化

### 相关命令
- `/mood`: 记录情绪
- `/symptom`: 记录症状

## 核心功能

### 1. 情绪模式分析
- **情绪趋势**: 情绪随时间的变化
- **触发因素**: 识别情绪触发因素
- **周期模式**: 周、月、季节性模式
- **与生活因素关联**: 睡眠、运动、饮食对情绪的影响
- **早期警示**: 识别情绪恶化的早期迹象

### 2. 压力评估
- **压力水平**: 评估当前压力程度
- **压力源识别**: 主要压力来源
- **压力影响**: 压力对健康的影响
- **应对资源**: 评估当前应对策略
- **倦怠风险**: 评估倦怠风险

### 3. 心理健康自我管理
- **情绪调节技巧**: 实用的情绪管理方法
- **压力管理**: 缓解压力的策略
- **正念练习**: 引导式正念和冥想
- **自我关怀**: 自我关怀实践
- **建立韧性**: 心理韧性建设

### 4. 危机识别与转介
- **危险信号**: 识别需要专业帮助的迹象
- **资源推荐**: 推荐心理健康资源
- **危机干预**: 危机情况下的应对
- **治疗考虑**: 何时考虑心理治疗

## 重要限制与伦理

### 明确边界
```
⚠️ 重要声明
此技能提供心理健康自我管理支持，不是心理治疗。
不能替代专业心理健康服务。

如果是以下情况，请立即寻求专业帮助：
- 有自伤或自杀想法
- 症状持续超过2周且影响功能
- 有严重心理疾病史
- 需要专业评估和治疗

紧急情况:
- 自杀/自伤危机: 立即拨打危机热线
- 精神科急症: 前往急诊室
```

## 输出格式

### 心理健康评估报告
```
💚 心理健康评估报告
生成时间: 2025-12-31
评估周期: 过去 30 天

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 情绪健康概览

总体情绪评分: 68/100 🟡 中等

情绪分布:
├─ 非常好: 3 天（10%）
├─ 好: 12 天（40%）
├─ 一般: 10 天（33%）
├─ 差: 4 天（14%）
└─ 很差: 1 天（3%）

情绪趋势:
├─ 平均评分: 6.5/10
├─ 最高: 9/10（2次）
├─ 最低: 3/10（1次）
├─ 趋势: ↗️ 缓慢改善
└─ 稳定性: 中等（波动存在）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎭 情绪模式分析

积极情绪:
├─ 快乐: 平均 5.5/10
├─ 平静: 平均 6.0/10
├─ 精力充沛: 平均 4.8/10
└─ 满足: 平均 5.5/10

消极情绪:
├─ 焦虑: 平均 3.5/10（最高 6/10）
├─ 压力: 平均 4.5/10（最高 7/10）
├─ 悲伤: 平均 2.8/10
├─ 疲劳: 平均 5.0/10（最高 7/10）
└─ 易怒: 平均 3.2/10

时间模式:
├─ 早晨情绪: 6.2/10（较好）
├─ 下午情绪: 6.5/10（最好）
├─ 晚间情绪: 6.0/10
└─ 深夜情绪: 5.2/10（最差）

周间模式:
├─ 周一: 5.5/10（工作压力）
├─ 周三: 6.8/10（周中高峰）
├─ 周五: 7.2/10（周末前夕）
└─ 周日: 6.0/10（即将工作）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔍 关联因素分析

睡眠 ↔ 情绪:
├─ 睡眠好（≥7小时）: 情绪 7.5/10
├─ 睡眠不足（<6小时）: 情绪 4.8/10
├─ 相关性: 强相关（0.78）
└─ 结论: ❌ 睡眠不足显著影响情绪

运动 ↔ 情绪:
├─ 运动日: 情绪 7.2/10
├─ 不运动日: 情绪 5.8/10
├─ 相关性: 中等相关（0.62）
└─ 结论: ✅ 运动积极影响情绪

工作压力 ↔ 情绪:
├─ 高压力工作日: 情绪 4.5/10
├─ 低压力工作日: 情绪 6.8/10
├─ 相关性: 强相关（-0.72）
└─ 结论: ❌ 工作压力是主要情绪影响因素

社交活动 ↔ 情绪:
├─ 社交日: 情绪 7.0/10
├─ 独处日: 情绪 6.1/10
├─ 相关性: 中等相关（0.55）
└─ 结论: ✅ 社交联系提升情绪

天气 ↔ 情绪:
├─ 晴天: 情绪 6.8/10
├─ 阴天: 情绪 6.2/10
└─ 相关性: 弱相关

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

😰 压力评估

当前压力水平: 中高（6.5/10）

主要压力源:
1. 工作压力 [严重程度: 高]
   ├─ 频率: 3-4 天/周
   ├─ 影响: 焦虑、疲劳、易怒
   ├─ 可控性: 中等
   └─ 优先处理: 是

2. 健康担忧 [严重程度: 中]
   ├─ 频率: 偶尔
   ├─ 影响: 轻度焦虑
   └─ 应对: 已在管理中

3. 经济压力 [严重程度: 低]
   ├─ 频率: 罕见
   └─ 影响: 轻微

压力影响:
├─ 身体症状: 头痛、肌肉紧张、疲劳
├─ 情绪症状: 焦虑、易怒、情绪低落
├─ 认知影响: 注意力下降、决策困难
└─ 行为影响: 睡眠差、食欲变化

应对策略评估:
当前使用的:
✓ 运动（有时有效）
✓ 与朋友交流（有效）
⚠️ 睡眠（效果不佳）
✗ 屏幕时间（反效果）

建议增加:
□ 正念冥想
□ 时间管理
□ 设定边界
□ 专业咨询

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎯 心理健康改善建议

优先级 1: 改善睡眠 [立即开始]
为什么: 睡眠与情绪强相关
目标: 7-8 小时/晚

策略:
□ 固定就寝时间
□ 睡前程序优化
□ 减少屏幕时间
□ 调整睡眠环境

预期改善: 情绪评分 +1.0-1.5

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

优先级 2: 压力管理 [第1周开始]

工作压力管理:

时间管理:
□ 番茄工作法（25分钟工作+5分钟休息）
□ 优先级排序（重要-紧急矩阵）
□ 学会说"不"（设定边界）
□ 休息日（真正休息）

工作时间:
□ 开始前: 规划当天任务
□ 工作中: 定时休息（每90分钟）
□ 结束后: 过渡仪式（关闭工作模式）

认知策略:
当感到压力时:
├─ 停止，深呼吸 5 次
├─ 问"这真的紧急吗？"
├─ 专注于可控制的部分
└─ 分解为小步骤

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

优先级 3: 正念与放松 [第1周开始]

日常正念练习:

早晨正念（5 分钟）:
├─ 时间: 起床后，早餐前
├─ 做法: 关注呼吸，身体感觉
└─ 目的: 设定平静基调

工作间歇正念（2-3 分钟，2-3 次/天）:
├─ 时间: 工作间隙
├─ 做法: 停止，深呼吸，关注当下
└─ 目的: 减少压力积累

晚间正念（10-15 分钟）:
├─ 时间: 就寝前
├─ 做法: 身体扫描或正念冥想
└─ 目的: 放松，准备睡眠

推荐应用:
□ Headspace
□ Calm
□ Insight Timer
□ 潮汐（中文）

其他放松技巧:
□ 渐进式肌肉放松
□ 4-7-8 呼吸法
□ 引导意象
□ 轻柔瑜伽或伸展

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

优先级 4: 情绪调节技能 [第2周开始]

识别情绪:
├─ 命名情绪（给情绪贴标签）
├─ 评估强度（1-10）
├─ 注意身体感觉
└─ 识别触发因素

情绪调节策略:

焦虑时:
□ 5-4-3-2-1 着地技术
  ├─ 看到 5 样东西
  ├─ 触摸 4 样东西
  ├─ 听到 3 样声音
  ├─ 闻到 2 样气味
  └─ 尝到 1 样味道
□ 深呼吸（4-7-8法）
□ 现实检验（担忧会实现吗？）

悲伤/低落时:
□ 允许感受（不要压抑）
□ 自我关怀（像对待朋友一样对待自己）
□ 小活动（散步、听音乐）
□ 联系支持系统

愤怒/易怒时:
□ 暂停（数到10再回应）
□ 离开情境（如果需要）
□ 身体活动释放
□ 表达（assertively，not aggressively）

压力/不知所措时:
□ 优先级排序
□ 分解为小步骤
□ 请求帮助
□ 接受不完美

积极情绪培养:
□ 感恩日记（每日3件好事）
□ 优势使用（做擅长的事）
□ 心流活动（沉浸式爱好）
□ 社交联系（ meaningful connections）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

优先级 5: 建立韧性 [长期]

韧性特质:
1. 认知灵活性
   ├─ 不同视角看问题
   ├─ 从失败中学习
   └─ "这将会过去"

2. 情绪调节
   ├─ 接受情绪（不压抑）
   ├─ 恢复能力（从挫折中反弹）
   └─ 乐观（现实主义乐观）

3. 意义感
   ├─ 价值观澄清
   ├─ 目标感
   └─ 帮助他人

4. 社会支持
   ├─ 建立支持网络
   ├─ 寻求帮助
   └─ 提供支持

培养练习:
□ 每日反思（今日学到什么）
□ 重构挑战（这是成长机会）
□ 自我同情（善待自己）
□ 保持希望（记住过去的成功）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 自我关怀清单

日常自我关怀:
☑️ 充足睡眠（7-8小时）
☑️ 规律运动（3-4次/周）
☑️ 健康饮食
☑️ 限制咖啡因和酒精
☑️ 正念练习（10分钟/天）
☑️ 休息日（真正休息）
☑️ 社交联系
☑️ 做自己喜欢的事

每周自我关怀:
□ 评估本周压力水平
□ 安排放松活动
□ 与朋友/家人深度交流
□ 自我反思时间
□ 调整下周计划

每月自我关怀:
□ 全天自我关怀日
□ 评估心理健康状态
□ 调整目标和策略
□ 庆祝小胜利
□ 必要时寻求专业帮助

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️ 危机识别

需要立即关注的风险信号:

自伤/自杀风险:
□ 有自伤或自杀想法
□ 觉得"没有我别人会更好"
□ 筹划自杀
□ 告别行为

立即行动:
→ 立即拨打危机热线
→ 前往急诊室
→ 联系信任的人
→ 不要独自一人

抑郁症状（持续 >2 周）:
□ 持续悲伤/空虚
□ 兴趣丧失
□ 体重/食欲变化
□ 睡眠问题
□ 疲劳/能量低
□ 无价值感/过度内疚
□ 难以集中
□ 死亡想法

焦虑症状（影响功能）:
□ 过度担忧难以控制
□ 不安/易疲劳
□ 注意力难以集中
□ 肌肉紧张
□ 睡眠问题
□ 回避情境

倦怠症状:
□ 身体疲惫
□ 情感耗竭
□ 工作成绩下降
□ 冷漠/疏离
□ 无价值感

建议:
如果出现以上情况:
⚠️ 寻求专业心理健康服务
□ 心理医生/精神科医生评估
□ 心理治疗（CBT、正念疗法等）
□ 必要时药物治疗

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📞 心理健康资源

危机热线（中国大陆）:
□ 全国心理援助热线: 400-161-9995
□ 北京心理危机研究与干预中心: 010-82951332
□ 上海心理热线: 021-962525
□ 希望24热线: 400-161-9995

在线资源:
□ 简单心理（专业咨询平台）
□ 壹心理（心理知识和咨询）
□ 心声（心理健康社区）

推荐应用:
□ Headspace（正念冥想）
□ Calm（睡眠和冥想）
□ Daylio（情绪追踪）
□ MoodTools（抑郁症支持）

书籍推荐:
□ 《正念：此刻是一枝花》- 乔·卡巴金
□ 《身体从未忘记》- 贝塞尔·范德考克
□ 《情绪急救》- 盖伊·温奇
□ 《ACT，就这么做》- 路斯·哈里斯

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📈 进度追踪

每日追踪:
☑️ 情绪评分（1-10）
☑️ 睡眠质量
☑️ 压力水平
☑️ 应对策略使用
☑️ 感恩事项

每周评估:
□ 平均情绪评分
□ 好日子 vs 差日子比例
□ 什么提升了情绪
□ 什么降低了情绪
□ 下周改进什么

每月回顾:
□ 与基线对比
□ 进步的地方
□ 仍需努力的方面
□ 调整策略

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💬 心理健康伴侣寄语

心理健康和身体健康一样重要。您正在积极管理健康，
这很棒。通过关注睡眠、压力和情绪调节，您可以
显著改善心理健康。

记住:
✓ 寻求帮助是强者的表现
✓ 小步前进也是进步
✓ 坏日子不代表失败
✓ 您不孤单
✓ 康复和成长是可能的

如果您需要，请不要犹豫寻求专业帮助。这是明智的
选择，不是弱点。

祝您心理健康每一天！💚

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
由个人健康信息系统生成
心理健康伴侣
注：不是心理治疗替代品
```

## 技术实现

### 情绪分析
```python
def analyze_mental_health(mood_data, related_factors):
    """分析心理健康"""

    analysis = {
        "mood_trends": calculate_trends(mood_data),
        "stress_level": assess_stress(mood_data),
        "correlations": find_correlations(mood_data, related_factors),
        "risk_factors": identify_risks(mood_data),
        "coping_strategies": analyze_coping(mood_data)
    }

    # 危机检测
    crisis_indicators = check_for_crisis(analysis)
    if crisis_indicators:
        return generate_crisis_response(crisis_indicators)

    # 生成建议
    recommendations = generate_recommendations(analysis)

    return {
        "analysis": analysis,
        "recommendations": recommendations,
        "resources": get_relevant_resources(analysis),
        "disclaimer": get_disclaimer()
    }
```

## 用户交互示例

### 示例 1: 情绪评估
**用户**: "最近我总是情绪低落"
**技能**: 分析情绪模式，识别因素，提供支持建议

### 示例 2: 压力管理
**用户**: "工作压力太大了，我快受不了了"
**技能**: 评估压力水平，提供应对策略，必要时建议转介

### 示例 3: 焦虑支持
**用户**: "我很焦虑，睡不着"
**技能**: 提供即时焦虑缓解技巧，长期建议

## 重要安全措施
- **危机检测**: 识别自伤/自杀风险
- **立即转介**: 危机情况提供热线和紧急资源
- **明确边界**: 始终澄清不是治疗替代品
- **鼓励专业帮助**: 持续症状 >2 周建议咨询

## 测试清单
- [ ] 验证危机检测准确性
- [ ] 测试情绪模式分析
- [ ] 验证建议的安全性和适当性
- [ ] 测试不同情绪问题场景
- [ ] 确认免责声明显著
- [ ] 验证资源推荐准确性

## 相关技能
- `health-trend-analyzer`: 情绪趋势分析
- `sleep-specialist`: 睡眠与情绪关联
- `wellness-coach`: 整体健康指导
